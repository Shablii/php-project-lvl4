@extends('layouts.app')

@section('content')

@include('flash::message')

<h1 class="mb-5">Задачи</h1>
<div class="d-flex">
    <div>
        <form method="GET" action="https://php-l4-task-manager.herokuapp.com/tasks" accept-charset="UTF-8" class="form-inline">
            <select class="form-control mr-2" name="filter[status_id]"><option selected="selected" value="">Статус</option><option value="88">Status</option><option value="89">В работе</option><option value="90">Выполняется</option><option value="91">Отменен</option><option value="93">Тестируется</option><option value="94">TEST!!!</option><option value="95">Правки</option><option value="97">Провален дедлайн</option><option value="114">303030303030</option><option value="9">Do some stuffwq</option><option value="35">more statuses1</option><option value="116">Исполнено</option><option value="1">TEST</option><option value="137">QQQ</option><option value="118">MyStatus</option><option value="57">&lt;&gt;</option><option value="10">&lt;script&gt;test&lt;/script&gt;</option><option value="62">TEST6i</option><option value="71">Codinggg33333</option><option value="121">status!</option><option value="122">1</option><option value="123">112</option><option value="21">В разработке2131</option><option value="124">wefsdz</option><option value="17">Super Task2222</option><option value="68">First</option><option value="66">TEST101</option><option value="77">test123</option><option value="141">test</option><option value="145">jghfgdfd</option><option value="146">yjdsq</option><option value="148">Новый статус. Тестируем отображение2</option><option value="69">TEST111</option><option value="75">ewww</option><option value="132">sada2</option><option value="150">status</option><option value="153">123</option><option value="154">1234</option><option value="133">111</option><option value="155">z</option><option value="110">123123</option></select>
            <select class="form-control mr-2" name="filter[created_by_id]"><option selected="selected" value="">Автор</option><option value="1">Alex</option><option value="2">feycot</option><option value="3">Andrey M</option><option value="4">Op</option><option value="5">Nikita Nikita</option><option value="19">Maxim</option><option value="6">yula</option><option value="7">Alex</option><option value="9">zxz</option><option value="10">ds</option><option value="26">Roman</option><option value="20">User</option><option value="21">Теst</option><option value="12">z</option><option value="22">loh</option><option value="11">Alex</option><option value="13">Alex</option><option value="14">bbb</option><option value="8">Harry Potter</option><option value="15">Igor Inkovsky</option><option value="16">Igor Inkovsky</option><option value="17">Lev Ryzhkov</option><option value="18">L</option><option value="68">Test</option><option value="25">Виктор</option><option value="23">Evg Vafiev</option><option value="27">Vlad</option><option value="69">samat</option><option value="29">test</option><option value="28">ava239</option><option value="30">tester</option><option value="31">Tester</option><option value="32">Ivan Sabirov</option><option value="33">feycot</option><option value="34">feycot</option><option value="35">Behruz Muyassarov</option><option value="36">vladimir</option><option value="37">Roman</option><option value="44">Aleksandr</option><option value="39">Alex</option><option value="38">vladimir</option><option value="40">ck</option><option value="41">Ivan Petrov</option><option value="42">lasnorf</option><option value="43">Stat</option><option value="45">uuuuoi</option><option value="48">Igor</option><option value="46">James Bond</option><option value="47">Test</option><option value="49">Ivan Baraban</option><option value="60">Konpa</option><option value="51">Test</option><option value="52">waerwwrrw</option><option value="53">Hexlet</option><option value="54">Test12</option><option value="55">Nikolay</option><option value="56">TEST1</option><option value="57">Игорь</option><option value="58">Ilia</option><option value="59">TEST1</option><option value="50">apolo</option><option value="61">Roman</option><option value="73">hex-test@email.com</option><option value="64">Hanna Herasimava</option><option value="63">test</option><option value="74">Test11</option><option value="65">Константин Араканцев</option><option value="24">Ruslan</option><option value="66">Оооо</option><option value="67">Alexey Ponomarev</option><option value="75">test13</option><option value="62">denis</option><option value="70">123</option><option value="71">Stan</option><option value="72">Roman</option><option value="117">Алексец</option><option value="76">Inqast</option><option value="77">qwe</option><option value="110">qwer</option><option value="111">Valentina</option><option value="112">Test121</option><option value="113">Валентина</option><option value="114">Татьяна</option><option value="118">noname</option><option value="119">test</option><option value="120">test2</option><option value="121">te</option><option value="125">Petr Ivanov</option><option value="127">qwerty</option><option value="129">XXX</option><option value="115">Green</option><option value="123">Proverka</option><option value="124">test</option><option value="122">test1</option><option value="130">andrew</option><option value="128">w</option><option value="126">0-ъ-0</option><option value="131">Плотников Дмитрий</option><option value="132">asdasd</option><option value="133">Виталий Кудрявцев</option><option value="135">Иван Князев</option><option value="116">Виталий Кудрявцев</option><option value="134">Виталий Кудрявцев</option><option value="136">fw</option><option value="137">fww</option><option value="138">kiborg</option><option value="139">puker</option><option value="140">kaker</option><option value="141">developer</option><option value="142">Alexander Karakin</option><option value="144">abasnui@mail.ru</option><option value="145">master1</option><option value="146">test644</option><option value="147">йгмвыншррп</option><option value="149">TesterS</option><option value="160">Юзер</option><option value="152">ddf</option><option value="151">Sem</option><option value="159">Vadim</option><option value="156">bysynth</option><option value="150">testerSuper</option><option value="153">vasily</option><option value="148">VK</option><option value="154">gai</option><option value="155">sdfd</option><option value="157">TEST11</option><option value="158">123456777</option><option value="143">Vyacheslav</option></select>
            <select class="form-control mr-2" name="filter[assigned_to_id]"><option selected="selected" value="">Исполнитель</option><option value="1">Alex</option><option value="2">feycot</option><option value="3">Andrey M</option><option value="4">Op</option><option value="5">Nikita Nikita</option><option value="19">Maxim</option><option value="6">yula</option><option value="7">Alex</option><option value="9">zxz</option><option value="10">ds</option><option value="26">Roman</option><option value="20">User</option><option value="21">Теst</option><option value="12">z</option><option value="22">loh</option><option value="11">Alex</option><option value="13">Alex</option><option value="14">bbb</option><option value="8">Harry Potter</option><option value="15">Igor Inkovsky</option><option value="16">Igor Inkovsky</option><option value="17">Lev Ryzhkov</option><option value="18">L</option><option value="68">Test</option><option value="25">Виктор</option><option value="23">Evg Vafiev</option><option value="27">Vlad</option><option value="69">samat</option><option value="29">test</option><option value="28">ava239</option><option value="30">tester</option><option value="31">Tester</option><option value="32">Ivan Sabirov</option><option value="33">feycot</option><option value="34">feycot</option><option value="35">Behruz Muyassarov</option><option value="36">vladimir</option><option value="37">Roman</option><option value="44">Aleksandr</option><option value="39">Alex</option><option value="38">vladimir</option><option value="40">ck</option><option value="41">Ivan Petrov</option><option value="42">lasnorf</option><option value="43">Stat</option><option value="45">uuuuoi</option><option value="48">Igor</option><option value="46">James Bond</option><option value="47">Test</option><option value="49">Ivan Baraban</option><option value="60">Konpa</option><option value="51">Test</option><option value="52">waerwwrrw</option><option value="53">Hexlet</option><option value="54">Test12</option><option value="55">Nikolay</option><option value="56">TEST1</option><option value="57">Игорь</option><option value="58">Ilia</option><option value="59">TEST1</option><option value="50">apolo</option><option value="61">Roman</option><option value="73">hex-test@email.com</option><option value="64">Hanna Herasimava</option><option value="63">test</option><option value="74">Test11</option><option value="65">Константин Араканцев</option><option value="24">Ruslan</option><option value="66">Оооо</option><option value="67">Alexey Ponomarev</option><option value="75">test13</option><option value="62">denis</option><option value="70">123</option><option value="71">Stan</option><option value="72">Roman</option><option value="117">Алексец</option><option value="76">Inqast</option><option value="77">qwe</option><option value="110">qwer</option><option value="111">Valentina</option><option value="112">Test121</option><option value="113">Валентина</option><option value="114">Татьяна</option><option value="118">noname</option><option value="119">test</option><option value="120">test2</option><option value="121">te</option><option value="125">Petr Ivanov</option><option value="127">qwerty</option><option value="129">XXX</option><option value="115">Green</option><option value="123">Proverka</option><option value="124">test</option><option value="122">test1</option><option value="130">andrew</option><option value="128">w</option><option value="126">0-ъ-0</option><option value="131">Плотников Дмитрий</option><option value="132">asdasd</option><option value="133">Виталий Кудрявцев</option><option value="135">Иван Князев</option><option value="116">Виталий Кудрявцев</option><option value="134">Виталий Кудрявцев</option><option value="136">fw</option><option value="137">fww</option><option value="138">kiborg</option><option value="139">puker</option><option value="140">kaker</option><option value="141">developer</option><option value="142">Alexander Karakin</option><option value="144">abasnui@mail.ru</option><option value="145">master1</option><option value="146">test644</option><option value="147">йгмвыншррп</option><option value="149">TesterS</option><option value="160">Юзер</option><option value="152">ddf</option><option value="151">Sem</option><option value="159">Vadim</option><option value="156">bysynth</option><option value="150">testerSuper</option><option value="153">vasily</option><option value="148">VK</option><option value="154">gai</option><option value="155">sdfd</option><option value="157">TEST11</option><option value="158">123456777</option><option value="143">Vyacheslav</option></select>
            <input class="btn btn-outline-primary mr-2" type="submit" value="Применить">
        </form>
    </div>
    @if(Auth::check())
    <a href="{{ route('tasks.create') }}" class="btn btn-primary ml-auto">Создать задачу</a>
    @endif
</div>
<table class="table mt-2">
    <thead>
    <tr>
        <th>ID</th>
        <th>Статус</th>
        <th>Имя</th>
        <th>Автор</th>
        <th>Исполнитель</th>
        <th>Дата создания</th>
        @if(Auth::check())
        <th>Действия</th>
        @endif
    </tr>
    </thead>
    @foreach($tasks as $task)
    <tr>
        <td>{{ $task->id }}</td>
        <td>{{ $task->status->name }}</td>
        <td> <a href="{{ route('tasks.show', $task) }}">{{ $task->name }}</a> </td>
        <td>{{ $task->createdBy->name }}</td>
        <td>{{ $task->assignedTo?->name }}</td>
        <td>{{ $task->created_at }}</td>
        <td>
            @if(Auth::check())
                @if(Auth::id() == $task->created_by_id)
            <a href="{{ route('tasks.destroy', $task->id) }}"
               data-method="delete"
               data-confirm="Вы уверены?"
               class="text-danger">Удалить</a>
                @endif
            <a href="{{ route('tasks.edit', $task->id) }}">Изменить</a>
            @endif
        </td>
    </tr>
    @endforeach
</table>
{{ $tasks->links() }}
@endsection
